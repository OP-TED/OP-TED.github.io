<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transpiling EFX :: TED Developer Documentation</title>
    <link rel="canonical" href="https://docs.ted.europa.eu/eforms/latest/efx/transpiling-efx.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/custom.css">
    <link rel="stylesheet" href="../../../_/css/vendor/docsearch-2.6.3.css">
        <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/icons/favicon-16x16.png">
    <link rel="manifest" href="../../../_/img/icons/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../../../_/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="../../../_/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="9zNtA8Mxo6eMk-CIvQQbCvXFWjOoAHT6phYIK3saIV4" />
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://docs.ted.europa.eu">
                <img src="../../../_/img/ted-logo.svg" class="logo" />
                <span class="navbar-title">TED Developer Documentation</span>
            </a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="https://docs.ted.europa.eu">Home</a>
                <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Products</a>
  <div class="navbar-dropdown">
      <a class="navbar-item" href="../../latest/index.html">eForms SDK</a>
      <a class="navbar-item" href="../../../EPO/latest/index.html">eProcurement Ontology</a>
      <a class="navbar-item" href="../../../ESPD-EDM/latest/index.html">ESPD EDM</a>
  </div>
</div>


<div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Resources</a>
  <div class="navbar-dropdown">
    <!-- <div class="navbar-item"><b>Publications Ofiice</b></div> -->
    <a class="navbar-item" href="https://github.com/OP-TED/eForms-SDK">eForms SDK on Github</a>
    <a class="navbar-item" href="https://simap.ted.europa.eu/web/simap/eforms">eForms on SIMAP</a>
    <a class="navbar-item" href="https://github.com/eprocurementontology/eprocurementontology">eProcurement
      Ontology</a>
    <a class="navbar-item" href="https://github.com/espd/espd-edm">European Single Procurement Document</a>
    <a class="navbar-item" href="https://op.europa.eu/en/web/eu-vocabularies/e-procurement/tables">eProcurement in
      EU Vocabularies</a>
    <hr class="navbar-divider">
    <!-- <div class="navbar-item"><b>DG GROW</b></div>-->
    <a class="navbar-item" href="https://ec.europa.eu/growth/single-market/public-procurement/digital/eforms_en">About
      eForms</a>
    <!-- <a class="navbar-item" href="https://github.com/eForms/eForms">eForms 2nd consultation</a> -->
  </div>
</div>

<a class="navbar-item" href="https://simap.ted.europa.eu/contact">Helpdesk</a>

                <div class="navbar-item search">
                    <input id="search-input" type="text" placeholder="Search docs">
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="eforms" data-version="1.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">eForms SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>General Reference</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../schema/index.html">eForms Specification</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/documents-forms-and-notices.html">Documents, forms &amp; notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/notice-content.html">Notice content</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Elements</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/schemas.html">Schemas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notices-xml-structure.html">Notices XML structure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notice-information.html">Notice information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/procedure-lot-part-information.html">Procedure, Group of Lots, Lot &amp; Part related information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/competition-results.html">Competition Results</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/parties.html">Parties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/change-notice.html">Change notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/contract-modification-notice.html">Contract Modification Notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/withheld-publication.html">Withheld publication of information</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/codelists-and-fields.html">Codelists and Fields</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/identifiers.html">Identifiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/acronyms-and-abbreviations.html">Acronyms &amp; abbreviations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/terms-and-definitions.html">Terms &amp; definitions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/other-resources.html">Other Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../reference/index.html">Metadata Reference</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/business-terms/index.html">Business Terms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/business-rules/index.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/code-lists/index.html">Codelists</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>SDK Contents</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fields/index.html">Field metadata</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fields/xml-structure.html">XML Structure</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../codelists/index.html">Codelists</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-types/index.html">Notice Types</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../viewer-templates/index.html">View Templates</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../translations/index.html">Translations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">EFX grammar</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="expression-syntax.html">EFX expressions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="template-syntax.html">EFX templates</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="transpiling-efx.html">Transpiling EFX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Developer Guide</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/index.html">Start Here</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/understanding-the-sdk.html">Understanding the SDK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/sdk-glossary.html">SDK glossary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../versioning.html">SDK versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Working with the SDK</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/notice-forms.html">Create the forms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/xml-generation.html">Generate XML</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/visualisation.html">Visualise notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/validation.html">Validate notices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/implementing-eforms-without-the-sdk.html">Working without the SDK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Java Libraries</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../efx-toolkit/index.html">EFX Toolkit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../eforms-core/index.html">eForms Core Library</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Sample Applications</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-viewer/index.html">Notice Viewer (Java)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-editor/index.html">Notice Editor (Java)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
      <div class="context">
          <span class="title">eForms SDK</span>
          <span class="version">1.3.2</span>
      </div>
  <ul class="components">
      <li class="component is-current">
        <a class="title" href="../../latest/index.html">eForms SDK</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../../latest/index.html">1.5.1</a>
            </li>
            <li class="version">
              <a href="../../1.4/index.html">1.4.1</a>
            </li>
            <li class="version is-current">
              <a href="../index.html">1.3.2</a>
            </li>
            <li class="version">
              <a href="../../1.2/index.html">1.2.1</a>
            </li>
            <li class="version">
              <a href="../../1.1/index.html">1.1.1</a>
            </li>
            <li class="version">
              <a href="../../1.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../../EPO/latest/index.html">eProcurement Ontology</a>
        <ul class="versions">
            <li class="version">
              <a href="../../../EPO/3.1.1/index.html">3.1.1 ~dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../EPO/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../../EPO/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../../EPO/2.0.1/index.html">2.0.1</a>
            </li>
            <li class="version">
              <a href="../../../EPO/2.0.0/index.html">2.0.0</a>
            </li>
            <li class="version">
              <a href="../../../EPO/1.0.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../../ESPD-EDM/latest/index.html">ESPD EDM</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../../../ESPD-EDM/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.1.1/index.html">2.1.1</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.1.0/index.html">2.1.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.0.2/index.html">2.0.2</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/1.0.2/index.html">1.0.2</a>
            </li>
        </ul>
      </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">eForms SDK</a></li>
    <li><a href="index.html">EFX grammar</a></li>
    <li><a href="transpiling-efx.html">Transpiling EFX</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.3.2</button>
  <div class="version-menu">
    <a class="version" href="../../latest/efx/transpiling-efx.html">1.5.1</a>
    <a class="version" href="../../1.4/efx/transpiling-efx.html">1.4.1</a>
    <a class="version is-current" href="transpiling-efx.html">1.3.2</a>
    <a class="version" href="../../1.2/efx/transpiling-efx.html">1.2.1</a>
    <a class="version" href="../../1.1/efx/transpiling-efx.html">1.1.1</a>
    <a class="version" href="../../1.0/efx/transpiling-efx.html">1.0.0</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Transpiling EFX</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A transpiler is a form of translator that takes as input the source code written in an input programming language and outputs the equivalent source code in a target output language. A famous transpiler is the one of TypeScript, which takes as input TypeScript source code and transpiles it to plain JavaScript.</p>
</div>
<div class="paragraph">
<p>EFX was not designed to drive an EFX template engine or to be executed directly in an EFX runtime environment. There is no EFX runtime or EFX template processor. Instead EFX was designed to be translatable to several other languages that target existing runtime environments and template engines.</p>
</div>
<div class="paragraph">
<p>In other words EFX was designed so that it can be automatically translated to the languages and runtime environments chosen by each individual eSender or application developer.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Typically, there is no reason to translate the EFX expressions and templates at runtime. The recommended approach would be to translate all EFX code to the target languages of your choice only once: at the time you import a new version of the eForms SDK into your application.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_available_efx_transpilers"><a class="anchor" href="#_available_efx_transpilers"></a>Available EFX transpilers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The EFX Toolkit for Java Developers, contains a generic translator that can be reused to translate EFX to several different target languages. See the <a href="#create-your-own-translators">next section</a> for more details.</p>
</div>
<div class="paragraph">
<p>The toolkit provides an implementation of the <code>ScriptGenerator</code> interface that targets <strong>XPath</strong> (see <code>XPathScriptGenerator</code>). This is the same implementation used by the Publications Office to generate the Schematron files included in the eForms SDK.</p>
</div>
<div class="paragraph">
<p>Additionally, the Notice Viewer sample application contains an implementation of the <code>MarkupGenerator</code> interface that targets <strong>XSLT</strong> (for transpiling EFX templates). Although the implementation in this sample application is too simplistic to be suitable for reuse without modifications, you can always use it as an inspiration or as the starting point to create a <code>MarkupGenerator</code> for XSLT that satisfies your production requirements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-your-own-translators"><a class="anchor" href="#create-your-own-translators"></a>Create your own translators using the EFX Toolkit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The EFX Toolkit contains two reusable transpilers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>EfxExpressionTranslator</code> can be used to translate EFX expressions to a target language of your choice.</p>
</li>
<li>
<p>The <code>EfxTemplateTranslator</code>, extends <code>EfxExpressionTranslator</code> to add the capability to transpile EFX templates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both transpilers were designed so that they can be reused to translate to several different target languages. To achieve that, three different interfaces have been defined to abstract the specifics of different possible translations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>ScriptGenerator</code> interface, abstracts the specifics of the target scripting language for transpiling EFX expressions.</p>
</li>
<li>
<p>The <code>MarkupGenerator</code> interface, abstracts the specifics of the target markup language for transpiling EFX templates.</p>
</li>
<li>
<p>Finally, the <code>SymbolResolver</code> is used to abstract symbol resolution (e.g. field identifiers etc.).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_implementing_the_symbolresolver_interface"><a class="anchor" href="#_implementing_the_symbolresolver_interface"></a>Implementing the SymbolResolver interface</h3>
<div class="paragraph">
<p>The SymbolResolver provides to the transpiler access to the eForms metadata available in the eForms SDK.</p>
</div>
<div class="paragraph">
<p>An implementation of the <code>SymbolResolver</code> interface that reads data directly from the eForms SDK is available in the Notice Viewer sample application.</p>
</div>
<div class="paragraph">
<p>The <code>SymbolResolver</code> implementation requires the implementation of only a few methods that resolve symbols and provide information on them like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the location (e.g. XPath) of the value corresponding to the symbol in the data source (e.g. notice XML).</p>
</li>
<li>
<p>the data type associated with a symbol</p>
</li>
<li>
<p>the relation of the symbol to other symbols like its parent node.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below is a simplified listing of the <code>SymbolResolver</code> interface for quick reference. You can find <a href="https://github.com/OP-TED/efx-toolkit-java/blob/develop/src/main/java/eu/europa/ted/efx/interfaces/SymbolResolver.java">the actual definition in Github</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package eu.europa.ted.efx.interfaces;

import java.util.List;
import eu.europa.ted.efx.model.Expression.PathExpression;

public interface SymbolResolver {
    public String getParentNodeOfField(String fieldId);
    public PathExpression getRelativePathOfField(String fieldId, PathExpression contextPath);
    public PathExpression getRelativePathOfNode(String nodeId, PathExpression contextPath);
    public PathExpression getAbsolutePathOfField(String fieldId);
    public PathExpression getAbsolutePathOfNode(String nodeId);
    public String getTypeOfField(String fieldId);
    public String getRootCodelistOfField(String fieldId);
    public List&lt;String&gt; expandCodelist(String codelistId);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason we abstract this functionality away from the transpiler implementation is because some applications may not read metadata directly from the SDK. Instead your application may combine the SDK metadata with other information in a proprietary metadata store. Implementing this interface allows you to reuse the existing transpiler in your application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will notice that some methods require you to return a <code>PathExpression</code>. Typically, this would be an XPath. However, it does not have to be an XPath if your data source is not XML. Whatever "path" these methods return will be passed along to the <code>ScriptGenerator</code> interface to dereference field values. So, as long as the paths that you return can be used to dereference field values in your target language, you are on the right track.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The interface is easy to implement. However there is one detail that needs attention. There are two methods that require you to return a relative path. If the path you are returning is not an XPath, then you need to craft your implementation carefully so that relative paths are calculated correctly. However, if you use XPath then you can reuse the <code>XPathContextualizer</code> provided in the EFX Toolkit.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_the_scriptgenerator_interface"><a class="anchor" href="#_implementing_the_scriptgenerator_interface"></a>Implementing the ScriptGenerator interface</h3>
<div class="paragraph">
<p>The <code>ScriptGenerator</code> interface provides to the transpiler the proper syntax, in your target language, for specific operations. For example, if the transpiler wants to generate code for concatenating strings in the target language, then it will call the <code>composeStringConcatenation</code> method of the <code>ScriptGenerator</code> that returns the code corresponding to the specific operation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All methods in this interface return an object of type <code>Expression</code> (or a derived type). The <code>Expression</code> class and  its subclasses are defined in the <code>eu.europa.ted.efx.model</code> package. Their goal is to enforce type safety. The <code>Expression</code> is an abstraction of an "expression" in the target scripting language. It only stores the target language script in its <code>script</code> field and along with this, it conveys data type information. This makes the code more readable and more type-safe.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Most methods in this interface start with the verb "compose". You will notice that these methods take as parameters <code>Expression</code> objects. These <code>Expression</code> objects are actually the return values of other methods of the same interface. The goal of the "composeXyz" methods is to "compose" the target language script that appropriately combines the passed <code>Expression</code> objects to perform a specific operation.</p>
</div>
<div class="paragraph">
<p>The methods that do not start with "compose" in this interface follow the naming convention "getXyzEquivalent". These methods take as a parameter a string that is typically an EFX literal, and are expected to return the equivalent script for that literal in the target language.</p>
</div>
<div class="paragraph">
<p>Although this interface requires you to implement 40+ methods, its implementation is not as hard as it might seem. All methods can typically be implemented in one or two lines of code. Se the implementation of <code>XPathScriptGenerator</code> in the EFX Toolkit for inspiration on how to implement this interface for target languages other than XPath.</p>
</div>
<div class="paragraph">
<p>Below is a simplified listing of the <code>ScriptGenerator</code> interface for quick reference. You can find <a href="https://github.com/OP-TED/efx-toolkit-java/blob/develop/src/main/java/eu/europa/ted/efx/interfaces/ScriptGenerator.java">the actual definition in Github</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package eu.europa.ted.efx.interfaces;

import java.util.List;
import eu.europa.ted.efx.model.Expression;
import eu.europa.ted.efx.model.Expression.*;

public interface ScriptGenerator {

    public &lt;T extends Expression&gt; T composeNodeReferenceWithPredicate(PathExpression nodeReference, BooleanExpression predicate, Class&lt;T&gt; type);
    public &lt;T extends Expression&gt; T composeFieldReferenceWithPredicate(PathExpression fieldReference, BooleanExpression predicate, Class&lt;T&gt; type);
    public &lt;T extends Expression&gt; T composeFieldValueReference(PathExpression fieldReference, Class&lt;T&gt; type);
    public &lt;T extends Expression&gt; T composeFieldAttributeReference(PathExpression fieldReference, String attribute, Class&lt;T&gt; type);
    public StringListExpression composeListOfStrings(List&lt;StringExpression&gt; list);
    public BooleanExpression getBooleanEquivalent(boolean value);
    public BooleanExpression composeLogicalAnd(BooleanExpression leftOperand, BooleanExpression rightOperand);
    public BooleanExpression composeLogicalOr(BooleanExpression leftOperand, BooleanExpression rightOperand);
    public BooleanExpression composeLogicalNot(BooleanExpression condition);
    public BooleanExpression composeContainsCondition(StringExpression needle, StringListExpression haystack);
    public BooleanExpression composePatternMatchCondition(StringExpression expression, String regexPattern);
    public &lt;T extends Expression&gt; T composeParenthesizedExpression(T expression, Class&lt;T&gt; type);
    public PathExpression composeExternalReference(StringExpression externalReference);
    public PathExpression composeFieldInExternalReference(PathExpression externalReference, PathExpression fieldReference);
    public PathExpression joinPaths(PathExpression first, PathExpression second);
    public StringExpression getStringLiteralFromUnquotedString(String value);
    public BooleanExpression composeComparisonOperation(Expression leftOperand, String operator, Expression rightOperand);
    public NumericExpression composeNumericOperation(NumericExpression leftOperand, String operator, NumericExpression rightOperand);
    public NumericExpression getNumericLiteralEquivalent(String efxLiteral);
    public StringExpression getStringLiteralEquivalent(String efxLiteral);
    public DateExpression getDateLiteralEquivalent(String efxLiteral);
    public TimeExpression getTimeLiteralEquivalent(String efxLiteral);
    public DurationExpression getDurationLiteralEquivalent(String efxLiteral);
    public NumericExpression composeCountOperation(PathExpression set);
    public NumericExpression composeToNumberConversion(StringExpression text);
    public NumericExpression composeSumOperation(PathExpression setReference);
    public NumericExpression composeStringLengthCalculation(StringExpression text);
    public StringExpression composeStringConcatenation(List&lt;StringExpression&gt; list);
    public BooleanExpression composeEndsWithCondition(StringExpression text, StringExpression endsWith);
    public BooleanExpression composeStartsWithCondition(StringExpression text, StringExpression startsWith);
    public BooleanExpression composeContainsCondition(StringExpression haystack, StringExpression needle);
    public StringExpression composeSubstringExtraction(StringExpression text, NumericExpression start);
    public StringExpression composeSubstringExtraction(StringExpression text, NumericExpression start, NumericExpression length);
    public StringExpression composeToStringConversion(NumericExpression number);
    public BooleanExpression composeExistsCondition(PathExpression reference);
    public DateExpression composeToDateConversion(StringExpression pop);
    public DateExpression composeAddition(DateExpression date, DurationExpression duration);
    public DateExpression composeSubtraction(DateExpression date, DurationExpression duration);
    public TimeExpression composeToTimeConversion(StringExpression pop);
    public DurationExpression composeSubtraction(DateExpression startDate,DateExpression endDate);
    public StringExpression composeNumberFormatting(NumericExpression number, StringExpression format);
    public DurationExpression composeMultiplication(NumericExpression number, DurationExpression duration);
    public DurationExpression composeAddition(DurationExpression left, DurationExpression right);
    public DurationExpression composeSubtraction(DurationExpression left, DurationExpression right);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_the_markupgenerator_interface"><a class="anchor" href="#_implementing_the_markupgenerator_interface"></a>Implementing the MarkupGenerator interface</h3>
<div class="paragraph">
<p>The <code>MarkupGenerator</code> interface is used to provide to the transpiler the proper syntax in the target templating language for specific operations.</p>
</div>
<div class="paragraph">
<p>An example implementation of the <code>MarkupGenerator</code> interface that generates XSLT script, can be found in the Notice Viewer sample application (see <code>XslMarkupGenerator</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will notice that all methods in this interface return objects of type <code>Markup</code>. Just like the <code>Expression</code> abstraction in the <code>ScriptGenerator</code>, these <code>Markup</code> object abstract the notion of target markup language script. They are introduced to improve  clarity and readability of code.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similarly to the <code>ScriptGenerator</code> interface, some methods in this interface also start with the verb "compose". These methods take as parameters <code>Markup</code> objects that have been previously returned by other methods in the same interface. Their goal is to appropriately combine these <code>Markup</code> parameters into new markup for a specific scenario.</p>
</div>
<div class="paragraph">
<p>The remaining methods in this interface start with the verb "render". You will notice that these methods take as parameters <code>Expression</code> objects that have been returned by your <code>ScriptGenerator</code> implementation. These methods are expected to return the target language markup for rendering these expressions in the output template.</p>
</div>
<div class="paragraph">
<p>Below is a simplified listing of the <code>MarkupGenerator</code> interface for quick reference. You can find <a href="https://github.com/OP-TED/efx-toolkit-java/blob/develop/src/main/java/eu/europa/ted/efx/interfaces/MarkupGenerator.java">the actual definition in Github</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package eu.europa.ted.efx.interfaces;

import java.util.List;
import eu.europa.ted.efx.model.Expression;
import eu.europa.ted.efx.model.Markup;
import eu.europa.ted.efx.model.Expression.PathExpression;
import eu.europa.ted.efx.model.Expression.StringExpression;

public interface MarkupGenerator {
    Markup composeOutputFile(final List&lt;Markup&gt; content, final List&lt;Markup&gt; fragments);
    Markup renderVariableExpression(final Expression variableExpression);
    Markup renderLabelFromKey(final StringExpression key);
    Markup renderLabelFromExpression(final Expression expression);
    Markup renderFreeText(final String freeText);
    Markup composeFragmentDefinition(final String name, String number, Markup content);
    Markup renderFragmentInvocation(final String name, final PathExpression context);
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_your_own_transpilers_from_scratch"><a class="anchor" href="#_creating_your_own_transpilers_from_scratch"></a>Creating your own transpilers from scratch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your application is written in Java, or you can include the EFX Toolkit for Java in your workflow then you don&#8217;t need to write your own transpilers.</p>
</div>
<div class="paragraph">
<p>In case you want to create a transpiler in C# or any of the other languages supported by ANTLR4, then you will need to download the ANTLR4 developer tools for your platform and use the EFX grammar provided in the eForm SDK as input to ANTRL4 to generate an EFX parser. You can <a href="https://www.antlr.org/download.html">download ANTLR4 developer tools</a> for the following languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java</p>
</li>
<li>
<p>C#</p>
</li>
<li>
<p>Python</p>
</li>
<li>
<p>JavaScript</p>
</li>
<li>
<p>Go</p>
</li>
<li>
<p>C++</p>
</li>
<li>
<p>Swift</p>
</li>
<li>
<p>PHP</p>
</li>
<li>
<p>DART</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Apart from a lexical analyser and a parser ANTLR4 will also generate for you an <code>EfxListener</code> and/or <code>EfxVisitor</code> which can be used as a basis for creating your translator. In our own implementation we chose to use the listener model. You can use the source code of the EFX Toolkit for Java to see how we approached the creation of our translator in Java.</p>
</div>
<div class="paragraph">
<p>The way the translation process would work is that first the lexical analyser (lexer) will tokenise the EFX input. Then the tokens will be parsed by the parser to produce a parse tree. Finally a walker will walk the parse tree to produce the translation. If you choose to use the walker provided by ANTRL4, then you can use the EfxListener generated by ANTLR4 to handle the events raised by the walker as it walks the parse tree. Alternatively, you can use the <code>EfxVisitor</code> which will allow you explicitly visit the nodes in the parse tree to produce the translated code.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Creating a transpiler is not trivial but it is not rocket science either. If you can avoid writing your own transpiler, all the better. The trickiest parts of the implementation are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>properly handing indentation in EFX templates</p>
</li>
<li>
<p>leveraging stacks to maintain context</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When in doubt, use the EFX Translator implementations available in the EFX Toolkit as an example.</p>
</div>
</td>
</tr>
</table>
</div>
<hr>
<div class="paragraph">
<p><strong>See also:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../efx-toolkit/index.html" class="xref page">EFX Toolkit for Java</a></p>
</li>
<li>
<p><a href="../notice-viewer/index.html" class="xref page">Notice Viewer sample application</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/docsearch-2.6.3.js"></script>
<script src="../../../_/js/vendor/search-algolia.js" id="search-script" data-api-key="7bd6f4bbe2cb3188cd99f1625cb00f75" data-api-id="BE8MR7O2G7" data-index-name="ted-docs-idx"></script>
<footer class="footer">
    <div class=columns>
        <div>
  <p>The projects documented in this Developer Documentation Portal are developed and managed by the TED & EU Public Procurement Unit of the Publications Office of the European Union
  <br/>This page was built using a link:https://github.com/OP-TED/antora-eui[fork of the Antora default UI], which is licensed under the terms of the MPL-2.0 license.</p>
</div>
        <div>
            <h3>This website is managed by<h3>
                    <img src="../../../_/img/op-logo-with-name.svg" class="logo" />
        </div>
    </div>
</footer>  </body>
</html>
