<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EFX expression syntax :: TED Developer Documentation</title>
    <link rel="canonical" href="https://docs.ted.europa.eu/eforms/latest/efx/expression-syntax.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/custom.css">
    <link rel="stylesheet" href="../../../_/css/vendor/docsearch-2.6.3.css">
        <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/icons/favicon-16x16.png">
    <link rel="manifest" href="../../../_/img/icons/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../../../_/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="../../../_/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="9zNtA8Mxo6eMk-CIvQQbCvXFWjOoAHT6phYIK3saIV4" />
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://docs.ted.europa.eu">
                <img src="../../../_/img/ted-logo.svg" class="logo" />
                <span class="navbar-title">TED Developer Documentation</span>
            </a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="https://docs.ted.europa.eu">Home</a>
                <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Products</a>
  <div class="navbar-dropdown">
      <a class="navbar-item" href="../../latest/index.html">eForms SDK</a>
      <a class="navbar-item" href="../../../EPO/latest/index.html">eProcurement Ontology</a>
      <a class="navbar-item" href="../../../ESPD-EDM/latest/index.html">ESPD EDM</a>
  </div>
</div>


<div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Resources</a>
  <div class="navbar-dropdown">
    <!-- <div class="navbar-item"><b>Publications Ofiice</b></div> -->
    <a class="navbar-item" href="https://github.com/OP-TED/eForms-SDK">eForms SDK on Github</a>
    <a class="navbar-item" href="https://simap.ted.europa.eu/web/simap/eforms">eForms on SIMAP</a>
    <a class="navbar-item" href="https://github.com/eprocurementontology/eprocurementontology">eProcurement
      Ontology</a>
    <a class="navbar-item" href="https://github.com/espd/espd-edm">European Single Procurement Document</a>
    <a class="navbar-item" href="https://op.europa.eu/en/web/eu-vocabularies/e-procurement/tables">eProcurement in
      EU Vocabularies</a>
    <hr class="navbar-divider">
    <!-- <div class="navbar-item"><b>DG GROW</b></div>-->
    <a class="navbar-item" href="https://ec.europa.eu/growth/single-market/public-procurement/digital/eforms_en">About
      eForms</a>
    <!-- <a class="navbar-item" href="https://github.com/eForms/eForms">eForms 2nd consultation</a> -->
  </div>
</div>

<a class="navbar-item" href="https://simap.ted.europa.eu/contact">Helpdesk</a>

                <div class="navbar-item search">
                    <input id="search-input" type="text" placeholder="Search docs">
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="eforms" data-version="1.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">eForms SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>General Reference</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../schema/index.html">eForms Specification</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/documents-forms-and-notices.html">Documents, forms &amp; notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/notice-content.html">Notice content</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Elements</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/schemas.html">Schemas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notices-xml-structure.html">Notices XML structure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notice-information.html">Notice information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/procedure-lot-part-information.html">Procedure, Group of Lots, Lot &amp; Part related information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/competition-results.html">Competition Results</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/parties.html">Parties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/change-notice.html">Change notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/contract-modification-notice.html">Contract Modification Notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/withheld-publication.html">Withheld publication of information</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/codelists-and-fields.html">Codelists and Fields</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/identifiers.html">Identifiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/acronyms-and-abbreviations.html">Acronyms &amp; abbreviations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/terms-and-definitions.html">Terms &amp; definitions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/other-resources.html">Other Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../reference/index.html">Metadata Reference</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/business-terms/index.html">Business Terms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/business-rules/index.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/code-lists/index.html">Codelists</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>SDK Contents</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fields/index.html">Field metadata</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fields/xml-structure.html">XML Structure</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../codelists/index.html">Codelists</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-types/index.html">Notice Types</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../viewer-templates/index.html">View Templates</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../translations/index.html">Translations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">EFX grammar</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="expression-syntax.html">EFX expressions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="template-syntax.html">EFX templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="transpiling-efx.html">Transpiling EFX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Developer Guide</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/index.html">Start Here</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/understanding-the-sdk.html">Understanding the SDK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/sdk-glossary.html">SDK glossary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../versioning.html">SDK versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Working with the SDK</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/notice-forms.html">Create the forms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/xml-generation.html">Generate XML</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/visualisation.html">Visualise notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/validation.html">Validate notices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/implementing-eforms-without-the-sdk.html">Working without the SDK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Java Libraries</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../efx-toolkit/index.html">EFX Toolkit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../eforms-core/index.html">eForms Core Library</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Sample Applications</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-viewer/index.html">Notice Viewer (Java)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-editor/index.html">Notice Editor (Java)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
      <div class="context">
          <span class="title">eForms SDK</span>
          <span class="version">1.0.0</span>
      </div>
  <ul class="components">
      <li class="component is-current">
        <a class="title" href="../../latest/index.html">eForms SDK</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../../latest/index.html">1.5.1</a>
            </li>
            <li class="version">
              <a href="../../1.4/index.html">1.4.1</a>
            </li>
            <li class="version">
              <a href="../../1.3/index.html">1.3.2</a>
            </li>
            <li class="version">
              <a href="../../1.2/index.html">1.2.1</a>
            </li>
            <li class="version">
              <a href="../../1.1/index.html">1.1.1</a>
            </li>
            <li class="version is-current">
              <a href="../index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../../EPO/latest/index.html">eProcurement Ontology</a>
        <ul class="versions">
            <li class="version">
              <a href="../../../EPO/3.1.1/index.html">3.1.1 ~dev</a>
            </li>
            <li class="version is-latest">
              <a href="../../../EPO/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../../EPO/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../../EPO/2.0.1/index.html">2.0.1</a>
            </li>
            <li class="version">
              <a href="../../../EPO/2.0.0/index.html">2.0.0</a>
            </li>
            <li class="version">
              <a href="../../../EPO/1.0.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../../ESPD-EDM/latest/index.html">ESPD EDM</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../../../ESPD-EDM/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.1.1/index.html">2.1.1</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.1.0/index.html">2.1.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.0.2/index.html">2.0.2</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/1.0.2/index.html">1.0.2</a>
            </li>
        </ul>
      </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">eForms SDK</a></li>
    <li><a href="index.html">EFX grammar</a></li>
    <li><a href="expression-syntax.html">EFX expressions</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.0.0</button>
  <div class="version-menu">
    <a class="version" href="../../latest/efx/expression-syntax.html">1.5.1</a>
    <a class="version" href="../../1.4/efx/expression-syntax.html">1.4.1</a>
    <a class="version" href="../../1.3/efx/expression-syntax.html">1.3.2</a>
    <a class="version" href="../../1.2/efx/expression-syntax.html">1.2.1</a>
    <a class="version" href="../../1.1/efx/expression-syntax.html">1.1.1</a>
    <a class="version is-current" href="expression-syntax.html">1.0.0</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">EFX expression syntax</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>EFX expressions are used to navigate, read and manipulate data inside eForms notice XML documents. Arguably, one does not need any language other than XPath in order to achieve the same goal. To understand why we had to move away from XPath <a href="index.html" class="xref page">follow this link</a>. EFX expression syntax is, however, inspired by XPath and tries to simplify things and focus expressions on the specific domain of eForms.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_types_literals"><a class="anchor" href="#_data_types_literals"></a>Data types &amp; literals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX uses the following data types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">String</dt>
<dd>
<p>This is the equivalent of TEXT data type. String literals appear in single (<code>'</code>) or double (<code>"</code>) quotes. There are several EFX expressions and functions that allow the manipulation of strings.</p>
</dd>
<dt class="hdlist1">Number</dt>
<dd>
<p>EFX treats both integer and decimal numbers the same. The decimal separator is the dot (<code>.</code>).</p>
</dd>
<dt class="hdlist1">Boolean</dt>
<dd>
<p>Boolean literals are <code>TRUE</code> and <code>FALSE</code>. EFX also interprets the literal <code>ALWAYS</code> to mean <code>TRUE</code> and the literal <code>NEVER</code> to mean <code>FALSE</code>.</p>
</dd>
<dt class="hdlist1">Date, Time</dt>
<dd>
<p>In eForms, date and time are always stored in separate fields. Therefore there is no EFX data type that combines date and time together. <code>Date</code> and <code>Time</code> are two separate data types. As eForms requires a time-zone to be specified for all date and time fields, EFX syntax requires date and time literals to include a time-zone.</p>
<div class="paragraph">
<p><strong>Unlike XPath</strong>, EFX date and time literals are not included in quotes.
NOTE:</p>
</div>
</dd>
<dt class="hdlist1">Duration</dt>
<dd>
<p>In EFX, durations (a.k.a. measures), are similar to XPath durations. Duration literals use a similar syntax for example: <code>P3D</code> denotes "3 days". <code>P3Y</code> stands for "3 years". Four different units are supported for duration measures: years (<code>P1Y</code>), months (<code>P1M</code>), weeks (<code>P1W</code>) and days (<code>P1D</code>).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">DayTimeDurationLiteral: '-'? 'P' INTEGER ('W' | 'D');
YearMonthDurationLiteral: '-'? 'P' INTEGER ('Y' | 'M');</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Unlike XPath</strong>, finer granularity for durations in hours, minutes or seconds is <strong>not supported</strong>. In addition, measure units cannot be combined in one duration expression. For example you <strong>cannot</strong> write a duration of <code>P2Y3M</code> to denote a duration of two years and three months.</p>
</div>
<div class="paragraph">
<p>Negative durations are also supported (e.g. <code>-P3W</code> is a valid negative duration of three weeks). Negative durations are useful in calculations.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_identifiers"><a class="anchor" href="#_identifiers"></a>Identifiers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX can recognise identifiers of eForms business terms, fields and nodes by taking advantage of the naming conventions used for them by the SDK. Codelist identifiers are included in parenthesis.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">BtId: ('BT' | 'OPP' | 'OPT' | 'OPA') '-' [0-9]+;
FieldId: BtId ('(' (('BT' '-' [0-9]+) | [a-z]) ')')? ('-' ([a-zA-Z_] ([a-zA-Z_] | [0-9])*))+;
NodeId: 'ND' '-' [a-zA-Z0-9]+;

codelistReference: OpenParenthesis codelistId CloseParenthesis;
codelistId: Identifier;

Identifier: IdentifierPart ('-' IdentifierPart)*;
IdentifierPart: [a-zA-Z_] ([a-zA-Z_] | [0-9])*;

Variable: '$' IdentifierPart;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referencing_eforms_fields_and_nodes"><a class="anchor" href="#_referencing_eforms_fields_and_nodes"></a>Referencing eForms fields and nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can reference an eForms field in EFX by using its identifier. The same for referencing an eForms node.</p>
</div>
<div class="paragraph">
<p>This makes expressions simpler to read and write and also prevents us from having to change existing expressions if the schema changes in the future.</p>
</div>
<div class="paragraph">
<p>Just like in XPath, these references actually represent an <code>XML node set</code>.</p>
</div>
<div class="listingblock">
<div class="title">Simplified excerpt from EFX grammar</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">fieldReferenceWithPredicate: reference=fieldReferenceWithAxis (OpenBracket predicate CloseBracket)?;
fieldReferenceWithAxis: axis? simpleFieldReference;
simpleFieldReference: FieldId;

nodeReferenceWithPredicate: simpleNodeReference (OpenBracket predicate CloseBracket)?;
simpleNodeReference: NodeId;

BtId: ('BT' | 'OPP' | 'OPT' | 'OPA') '-' [0-9]+;
FieldId: BtId ('(' (('BT' '-' [0-9]+) | [a-z]) ')')? ('-' ([a-zA-Z_] ([a-zA-Z_] | [0-9])*))+;
NodeId: 'ND' '-' [a-zA-Z0-9]+;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_predicates"><a class="anchor" href="#_predicates"></a>Predicates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A field or node reference can be complemented with a predicate that restricts the <code>XML elements</code> it matches.</p>
</div>
<div class="paragraph">
<p>As in XPath, EFX predicates are logical (boolean) EFX expressions included in square brackets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">predicate: booleanExpression;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logical_expressions"><a class="anchor" href="#_logical_expressions"></a>Logical expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX supports boolean expressions including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>boolean literals (<code>TRUE</code>, <code>FALSE</code>)</p>
</li>
<li>
<p>comparisons (<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;&#x003D;</code>)</p>
</li>
<li>
<p>logical operations (<code>and</code>, <code>or</code>, <code>not</code>)</p>
</li>
<li>
<p>regular expression pattern matching</p>
</li>
<li>
<p>checking for empty values</p>
</li>
<li>
<p>checking for presence of XML elements</p>
</li>
<li>
<p>checking for presence of values in lists</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Simplified excerpt from EFX grammar</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">booleanExpression
    : OpenParenthesis booleanExpression CloseParenthesis
    | booleanExpression     operator=Or booleanExpression
    | booleanExpression     operator=And booleanExpression
    | stringExpression      modifier=Not? In stringSequence
    | booleanExpression     modifier=Not? In booleanSequence
    | numericExpression     modifier=Not? In numericSequence
    | dateExpression        modifier=Not? In dateSequence
    | timeExpression        modifier=Not? In timeSequence
    | durationExpression    modifier=Not? In durationSequence
    | stringExpression      modifier=Not? Like pattern=STRING
    | stringExpression      Is modifier=Not? Empty
    | pathFromReference     Is modifier=Not? Present
    | pathFromReference     Is modifier=Not? Unique In absoluteFieldReference
    | lateBoundExpression   operator=Comparison lateBoundExpression
    | booleanExpression     operator=Comparison booleanExpression
    | numericExpression     operator=Comparison numericExpression
    | stringExpression      operator=Comparison stringExpression
    | dateExpression        operator=Comparison dateExpression
    | timeExpression        operator=Comparison timeExpression
    | durationExpression    operator=Comparison durationExpression
    | If booleanExpression Then booleanExpression Else booleanExpression
    | (Every | Some) iteratorList Satisfies booleanExpression
    | booleanLiteral
    | booleanFunction
    | BooleanTypeCast lateBoundExpression
    | lateBoundExpression
	;

booleanLiteral: Always | True | Never | False;

booleanFunction
    : Not OpenParenthesis booleanExpression CloseParenthesis
    | ContainsFunction OpenParenthesis haystack=stringExpression Comma needle=stringExpression CloseParenthesis
    | StartsWithFunction OpenParenthesis haystack=stringExpression Comma needle=stringExpression CloseParenthesis
    | EndsWithFunction OpenParenthesis haystack=stringExpression Comma needle=stringExpression CloseParenthesis
    | SequenceEqualFunction OpenParenthesis left=sequenceExpression Comma right=sequenceExpression CloseParenthesis
    ;

    Comparison: '==' | '!=' | '&gt;' | '&gt;=' | '&lt;' | '&lt;=';</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_string_expressions"><a class="anchor" href="#_string_expressions"></a>String expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX allows simple string manipulation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">stringExpression
    : If booleanExpression Then stringExpression Else stringExpression
    | stringLiteral
    | stringFunction
    | TextTypeCast lateBoundExpression
    | lateBoundExpression
    ;

stringFunction
    : SubstringFunction OpenParenthesis stringExpression Comma start=numericExpression (Comma length=numericExpression)? CloseParenthesis
    | StringFunction OpenParenthesis numericExpression CloseParenthesis
    | ConcatFunction OpenParenthesis stringExpression (Comma stringExpression)* CloseParenthesis
    | FormatNumberFunction OpenParenthesis numericExpression (Comma format=stringExpression)? CloseParenthesis
    ;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_numeric_expressions"><a class="anchor" href="#_numeric_expressions"></a>Numeric expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX numbers can either be integers or decimals.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">numericExpression
    : OpenParenthesis numericExpression CloseParenthesis
    | numericExpression operator=(Star | Slash | Percent) numericExpression
    | numericExpression operator=(Plus | Minus) numericExpression
    | If booleanExpression Then numericExpression Else numericExpression
    | numericLiteral
    | numericFunction
    | NumericTypeCast lateBoundExpression
    | lateBoundExpression
    ;

numericFunction
    : CountFunction OpenParenthesis sequenceExpression CloseParenthesis
    | NumberFunction OpenParenthesis stringExpression CloseParenthesis
    | SumFunction OpenParenthesis numericSequence CloseParenthesis
    | StringLengthFunction OpenParenthesis stringExpression CloseParenthesis
    ;

numericLiteral: INTEGER | DECIMAL;

INTEGER: '-'? [0-9]+;
DECIMAL: '-'? [0-9]? '.' [0-9]+;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_date_time_expressions"><a class="anchor" href="#_date_time_expressions"></a>Date, Time expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Date and time expressions allow the manipulation of date and time values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">dateExpression
    : If booleanExpression Then dateExpression Else dateExpression
    | dateLiteral
    | dateFunction
    | DateTypeCast lateBoundExpression
    | lateBoundExpression
    ;

timeExpression
    : If booleanExpression Then timeExpression Else timeExpression
    | timeLiteral
    | timeFunction
    | TimeTypeCast lateBoundExpression
    | lateBoundExpression
    ;

dateFunction
    : DateFunction OpenParenthesis stringExpression CloseParenthesis
    | AddMeasure OpenParenthesis dateExpression Comma durationExpression CloseParenthesis
    | SubtractMeasure OpenParenthesis dateExpression Comma durationExpression CloseParenthesis
    ;

timeFunction
    : TimeFunction OpenParenthesis stringExpression CloseParenthesis
    ;

// EFX tokens for date and time
DATE: DIGIT DIGIT DIGIT DIGIT '-' DIGIT DIGIT '-' DIGIT DIGIT (ZONE | 'Z');
TIME: DIGIT DIGIT Colon DIGIT DIGIT Colon DIGIT DIGIT (ZONE | 'Z');
ZONE: ('+' | '-') DIGIT DIGIT ':' DIGIT DIGIT;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_duration_expressions"><a class="anchor" href="#_duration_expressions"></a>Duration expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Duration expressions allow the manipulation of durations including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding or subtracting a duration to/from another</p>
</li>
<li>
<p>Multiplying a duration by a number</p>
</li>
<li>
<p>Calculating the duration between two dates</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">durationExpression
    : OpenParenthesis durationExpression CloseParenthesis
    | endDate=dateExpression Minus startDate=dateExpression
    | numericExpression Star durationExpression
    | durationExpression Star numericExpression
    | durationExpression Plus durationExpression
    | durationExpression Minus durationExpression
    | If booleanExpression Then durationExpression Else durationExpression
	| durationLiteral
    | durationFunction
    | DurationTypeCast lateBoundExpression
    | lateBoundExpression
    ;

	durationFunction
    : DayTimeDurationFunction OpenParenthesis stringExpression CloseParenthesis
    | YearMonthDurationFunction OpenParenthesis stringExpression CloseParenthesis
    ;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sequences_and_iterators"><a class="anchor" href="#_sequences_and_iterators"></a>Sequences and iterators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sequences allow the manipulation of lists (sets of values).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">sequenceExpression
    : sequenceFromReference
    | stringSequence
    | booleanSequence
    | numericSequence
    | dateSequence
    | timeSequence
    | durationSequence
    | sequenceFunction
    ;

sequenceFromReference
    : fieldReference
    | attributeReference
    ;

stringSequence
    : OpenParenthesis stringExpression (Comma stringExpression)* CloseParenthesis
    | stringSequenceFromIteration
    | OpenParenthesis stringSequenceFromIteration CloseParenthesis
    | codelistReference
    | TextTypeCast? sequenceFromReference
    ;

codelistReference: OpenParenthesis codeListId=codelistId CloseParenthesis;
codelistId: Identifier;

// ... <i class="conum" data-value="1"></i><b>(1)</b>

stringSequenceFromIteration: For iteratorList Return stringExpression; <i class="conum" data-value="2"></i><b>(2)</b>

iteratorList: iteratorExpression (Comma iteratorExpression)*;
iteratorExpression: stringIteratorExpression | booleanIteratorExpression | numericIteratorExpression | dateIteratorExpression | timeIteratorExpression | durationIteratorExpression | contextIteratorExpression;

stringIteratorExpression: stringVariableDeclaration In stringSequence;
booleanIteratorExpression: booleanVariableDeclaration In booleanSequence;
numericIteratorExpression: numericVariableDeclaration In numericSequence;
dateIteratorExpression: dateVariableDeclaration In dateSequence;
timeIteratorExpression: timeVariableDeclaration In timeSequence;
durationIteratorExpression: durationVariableDeclaration In durationSequence;
contextIteratorExpression: contextVariableDeclaration In (fieldContext | nodeContext);

sequenceFunction
    : DistinctValuesFunction OpenParenthesis (sequenceExpression | variableReference) CloseParenthesis
    | UnionFunction OpenParenthesis (sequenceExpression | variableReference) Comma (sequenceExpression | variableReference) CloseParenthesis
    | IntersectFunction OpenParenthesis (sequenceExpression | variableReference) Comma (sequenceExpression | variableReference) CloseParenthesis
    | ExceptFunction OpenParenthesis (sequenceExpression | variableReference) Comma (sequenceExpression | variableReference) CloseParenthesis
    ;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Several other sequence types are omitted here to make the excerpt short. See the EFX grammar for a complete specification.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>For</code> loops allow for the manipulation of sequences. Their syntax is very similar to <code>for</code> loops in XPath.</td>
</tr>
</table>
</div>
<hr>
<div class="paragraph">
<p><strong>See also:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="template-syntax.html" class="xref page">EFX template syntax</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/docsearch-2.6.3.js"></script>
<script src="../../../_/js/vendor/search-algolia.js" id="search-script" data-api-key="7bd6f4bbe2cb3188cd99f1625cb00f75" data-api-id="BE8MR7O2G7" data-index-name="ted-docs-idx"></script>
<footer class="footer">
    <div class=columns>
        <div>
  <p>The projects documented in this Developer Documentation Portal are developed and managed by the TED & EU Public Procurement Unit of the Publications Office of the European Union
  <br/>This page was built using a link:https://github.com/OP-TED/antora-eui[fork of the Antora default UI], which is licensed under the terms of the MPL-2.0 license.</p>
</div>
        <div>
            <h3>This website is managed by<h3>
                    <img src="../../../_/img/op-logo-with-name.svg" class="logo" />
        </div>
    </div>
</footer>  </body>
</html>
