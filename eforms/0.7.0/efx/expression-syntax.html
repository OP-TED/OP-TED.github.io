<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EFX expression syntax :: TED Developer Documentation</title>
    <link rel="canonical" href="https://docs.ted.europa.eu/eforms/1.1.0/efx/expression-syntax.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
     <link rel="stylesheet" href="../../../_/css/custom.css">
    <link rel="stylesheet" href="../../../_/css/search.css">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/icons/favicon-16x16.png">
    <link rel="manifest" href="../../../_/img/icons/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../../../_/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="../../../_/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="9zNtA8Mxo6eMk-CIvQQbCvXFWjOoAHT6phYIK3saIV4" />
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://docs.ted.europa.eu">
                <img src="../../../_/img/ted-logo.svg" class="logo" />
                <span class="navbar-title">TED Developer Documentation</span>
            </a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="https://docs.ted.europa.eu">Home</a>
                <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Products</a>
  <div class="navbar-dropdown">
    <a class="navbar-item" href="../../1.1.0/index.html">eForms SDK</a>
    <a class="navbar-item" href="../../../EPO/dev/index.html">eProcurement Ontology</a>
    <a class="navbar-item" href="../../../ESPD-EDM/3.0.1/index.html">ESPD EDM</a>
  </div>
</div>


<div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Resources</a>
  <div class="navbar-dropdown">
    <!-- <div class="navbar-item"><b>Publications Ofiice</b></div> -->
    <a class="navbar-item" href="https://github.com/OP-TED/eForms-SDK">eForms SDK on Github</a>
    <a class="navbar-item" href="https://simap.ted.europa.eu/web/simap/eforms">eForms on SIMAP</a>
    <a class="navbar-item" href="https://github.com/eprocurementontology/eprocurementontology">eProcurement
      Ontology</a>
    <a class="navbar-item" href="https://github.com/espd/espd-edm">European Single Procurement Document</a>
    <a class="navbar-item" href="https://op.europa.eu/en/web/eu-vocabularies/e-procurement/tables">eProcurement in
      EU Vocabularies</a>
    <hr class="navbar-divider">
    <!-- <div class="navbar-item"><b>DG GROW</b></div>-->
    <a class="navbar-item" href="https://ec.europa.eu/growth/single-market/public-procurement/digital/eforms_en">About
      eForms</a>
    <!-- <a class="navbar-item" href="https://github.com/eForms/eForms">eForms 2nd consultation</a> -->
  </div>
</div>

<a class="navbar-item" href="https://simap.ted.europa.eu/contact">Helpdesk</a>

                <div class="navbar-item search">
                    <input id="search-input" type="text" placeholder="Search docs">
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="eforms" data-version="0.7.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">eForms SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../schema/index.html">eForms Schema</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/documents-forms-and-notices.html">Documents, forms &amp; notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/notice-content.html">Notice content</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../schema/elements.html">Elements</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/schemas.html">Schemas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notices-xml-structure.html">Notices XML structure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notice-information.html">Notice information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/procedure-lot-part-information.html">Procedure, Group of Lots, Lot &amp; Part related information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/competition-results.html">Competition Results</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/parties.html">Parties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/change-notice.html">Change notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/contract-modification-notice.html">Contract Modification Notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/withheld-publication.html">Withheld publication of information</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/codelists-and-fields.html">Codelists and Fields</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/identifiers.html">Identifiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/acronyms-and-abbreviations.html">Acronyms &amp; abbreviations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/terms-and-definitions.html">Terms &amp; definitions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/other-resources.html">Other Resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fields/index.html">Field metadata</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fields/xml-structure.html">XML Structure</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../codelists/index.html">Codelists in eForms</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../translations/index.html">Translations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-types/index.html">Notice Types</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../viewer-templates/index.html">Notice View Templates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../1.1.0/reference/index.html">Metadata Reference</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../1.1.0/reference/business-terms/index.html">Business Terms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../1.1.0/reference/business-rules/index.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../1.1.0/reference/code-lists/index.html">Codelists</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">eForms Expression Language</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="expression-syntax.html">EFX expressions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="template-syntax.html">EFX templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="transpiling-efx.html">Transpiling EFX</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../efx-toolkit/index.html">EFX Toolkit for Java</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-viewer/index.html">Notice Viewer Sample App</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
    <div class="context">
        <span class="title">eForms SDK</span>
        <span class="version">0.7.0</span>
    </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../1.1.0/index.html">eForms SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../1.1.0/index.html">1.1.0</a>
        </li>
        <li class="version">
          <a href="../../1.0.0/index.html">1.0.0</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">0.7.0</a>
        </li>
        <li class="version">
          <a href="../../0.6.2/index.html">0.6.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../EPO/dev/index.html">eProcurement Ontology</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../EPO/dev/index.html">dev</a>
        </li>
        <li class="version">
          <a href="../../../EPO/3.0.0/index.html">3.0.0</a>
        </li>
        <li class="version">
          <a href="../../../EPO/2.0.1/index.html">2.0.1</a>
        </li>
        <li class="version">
          <a href="../../../EPO/2.0.0/index.html">2.0.0</a>
        </li>
        <li class="version">
          <a href="../../../EPO/1.0.0/index.html">1.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../ESPD-EDM/3.0.1/index.html">ESPD EDM</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ESPD-EDM/3.0.1/index.html">3.0.1</a>
        </li>
        <li class="version">
          <a href="../../../ESPD-EDM/2.1.1/index.html">2.1.1</a>
        </li>
        <li class="version">
          <a href="../../../ESPD-EDM/2.1.0/index.html">2.1.0</a>
        </li>
        <li class="version">
          <a href="../../../ESPD-EDM/2.0.2/index.html">2.0.2</a>
        </li>
        <li class="version">
          <a href="../../../ESPD-EDM/1.0.2/index.html">1.0.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">eForms SDK</a></li>
    <li><a href="index.html">eForms Expression Language</a></li>
    <li><a href="expression-syntax.html">EFX expressions</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.7.0</button>
  <div class="version-menu">
    <a class="version" href="../../1.1.0/efx/expression-syntax.html">1.1.0</a>
    <a class="version" href="../../1.0.0/efx/expression-syntax.html">1.0.0</a>
    <a class="version is-current" href="expression-syntax.html">0.7.0</a>
    <a class="version" href="../../0.6.2/efx/expression-syntax.html">0.6.2</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">EFX expression syntax</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>EFX expressions are used to navigate, read and manipulate data inside eForms notice XML documents. Arguably, one does not need any language other than XPath in order to achieve the same goal. To understand why we had to move away from XPath <a href="index.html" class="page">follow this link</a>. EFX expression syntax is, however, inspired by XPath and tries to simplify things and focus expressions on the specific domain of eForms.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_types_literals"><a class="anchor" href="#_data_types_literals"></a>Data types &amp; literals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX uses the following data types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">String</dt>
<dd>
<p>This is the equivalent of TEXT data type. String literals appear in single (<code>'</code>) or double (<code>"</code>) quotes. There are several EFX expressions and functions that allow the manipulation of strings.</p>
</dd>
<dt class="hdlist1">Number</dt>
<dd>
<p>EFX treats both integer and decimal numbers the same. The decimal separator is the dot (<code>.</code>).</p>
</dd>
<dt class="hdlist1">Boolean</dt>
<dd>
<p>Boolean literals are <code>TRUE</code> and <code>FALSE</code>. EFX also interprets the literal <code>ALWAYS</code> to mean <code>TRUE</code> and the literal <code>NEVER</code> to mean <code>FALSE</code>.</p>
</dd>
<dt class="hdlist1">Date, Time</dt>
<dd>
<p>In eForms, date and time are always stored in separate fields. Therefore there is no EFX data type that combines date and time together. <code>Date</code> and <code>Time</code> are two separate data types.</p>
<div class="paragraph">
<p><strong>Unlike XPath</strong>, EFX date and time literals are not included in quotes.</p>
</div>
</dd>
<dt class="hdlist1">Duration</dt>
<dd>
<p>In EFX, durations (a.k.a. measures), are similar to XPath durations. Duration literals use a similar syntax for example: <code>P3D</code> denotes "3 days". <code>P3Y</code> stands for "3 years". Four different units are supported for duration measures: years (<code>P1Y</code>), months (<code>P1M</code>), weeks (<code>P1W</code>) and days (<code>P1D</code>).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">DayTimeDurationLiteral: '-'? 'P' INTEGER ('W' | 'D');
YearMonthDurationLiteral: '-'? 'P' INTEGER ('Y' | 'M');</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Unlike XPath</strong>, finer granularity for durations in hours, minutes or seconds is <strong>not supported</strong>. In addition, measure units cannot be combined in one duration expression. For example you <strong>cannot</strong> write a duration of <code>P2Y3M</code> to denote a duration of two years and three months.</p>
</div>
<div class="paragraph">
<p>Negative durations are also supported (e.g. <code>-P3W</code> is a valid negative duration of three weeks). Negative durations are useful in calculations.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_identifiers"><a class="anchor" href="#_identifiers"></a>Identifiers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX can recognise identifiers of eForms business terms, fields and nodes by taking advantage of the naming conventions used for them by the SDK. Codelist identifiers are included in parenthesis.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">BtId: ('BT' | 'OPP' | 'OPT') '-' [0-9]+;
FieldId: BtId ('(' (('BT' '-' [0-9]+) | [a-z]) ')')? ('-' ([a-zA-Z_] ([a-zA-Z_] | [0-9])*))+;
NodeId: 'ND' '-' [0-9]+;

codelistReference: OpenParenthesis codelistId CloseParenthesis;
codelistId: Identifier;

Identifier: IdentifierPart ('-' IdentifierPart)*;
IdentifierPart: [a-zA-Z_] ([a-zA-Z_] | [0-9])*;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referencing_eforms_fields_and_nodes"><a class="anchor" href="#_referencing_eforms_fields_and_nodes"></a>Referencing eForms fields and nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can reference an eForms field in EFX by using its identifier. The same for referencing an eForms node.</p>
</div>
<div class="paragraph">
<p>This makes expressions simpler to read and write and also prevents us from having to change existing expressions if the schema changes in the future.</p>
</div>
<div class="paragraph">
<p>Just like in XPath, these references actually represent an <code>XML node set</code>.</p>
</div>
<div class="listingblock">
<div class="title">Simplified excerpt from EFX grammar</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">fieldReferenceWithPredicate: simpleFieldReference OpenBracket predicate CloseBracket;
simpleFieldReference: FieldId;

nodeReferenceWithPredicate: simpleNodeReference OpenBracket predicate CloseBracket;
simpleNodeReference: NodeId;

BtId: ('BT' | 'OPP' | 'OPT') '-' [0-9]+;
FieldId: BtId ('(' (('BT' '-' [0-9]+) | [a-z]) ')')? ('-' ([a-zA-Z_] ([a-zA-Z_] | [0-9])*))+;
NodeId: 'ND' '-' [0-9]+;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_predicates"><a class="anchor" href="#_predicates"></a>Predicates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A field or node reference can be complimented with a predicate that restricts the <code>XML nodes</code> it matches.</p>
</div>
<div class="paragraph">
<p>Just like in XPath, EFX predicates are EFX logical (boolean) EFX expressions included in square brackets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">predicate: booleanExpression;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logical_expressions"><a class="anchor" href="#_logical_expressions"></a>Logical expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX supports boolean expressions including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>boolean literals (<code>TRUE</code>, <code>FALSE</code>)</p>
</li>
<li>
<p>comparisons (<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&#8656;</code>)</p>
</li>
<li>
<p>logical operations (<code>and</code>, <code>or</code>, <code>not</code>)</p>
</li>
<li>
<p>regular expression pattern matching</p>
</li>
<li>
<p>checking for empty values</p>
</li>
<li>
<p>checking for presence of XML elements</p>
</li>
<li>
<p>check for presence of values in lists</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Simplified excerpt from EFX grammar</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-antlr4 hljs" data-lang="antlr4">booleanExpression
	: OpenParenthesis booleanExpression CloseParenthesis
	| booleanExpression Or booleanExpression
	| booleanExpression And booleanExpression
	| stringExpression Not? In list
	| stringExpression Is Not? Empty
	| setReference Is Not? Present
	| stringExpression Not? Like pattern=STRING
	| fieldValueReference Comparison fieldValueReference
	| booleanExpression Comparison booleanExpression
	| numericExpression Comparison numericExpression
	| stringExpression Comparison stringExpression
	| dateExpression Comparison dateExpression
	| timeExpression Comparison timeExpression
	| durationExpression Comparison durationExpression
	| booleanLiteral
	| booleanFunction
	| BooleanTypeCast? fieldValueReference
	;

    booleanLiteral: Always | True | Never | False;

    Comparison: '==' | '!=' | '&gt;' | '&gt;=' | '&lt;' | '&lt;=';</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p><strong>See also:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="template-syntax.html" class="page">EFX template syntax</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/search.js" id="search-script" data-base-path="../../.." data-page-path="/eforms/0.7.0/efx/expression-syntax.html"></script>
<script async src="../../../_/../search-index.js"></script>

<footer class="footer">
    <div class=columns>
        <div>
  <p>The <b>eForms SDK</b> is created by the Publications Office of the European Union and is licensed under the terms of <a href="https://github.com/OP-TED/eForms-SDK/blob/main/LICENSE">EUPL-1.2 license</a>.
  <br/>This page was built using the Antora default UI. The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</div>
        <div>
            <h3>This website is managed by<h3>
                    <img src="../../../_/img/op-logo-with-name.svg" class="logo" />
        </div>
    </div>
</footer>  </body>
</html>
