<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>eForms Expression Language :: TED Developer Documentation</title>
    <link rel="canonical" href="https://docs.ted.europa.eu/eforms/latest/efx/index.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/custom.css">
    <link rel="stylesheet" href="../../../_/css/vendor/docsearch-2.6.3.css">
        <link rel="apple-touch-icon" sizes="180x180" href="../../../_/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../_/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../_/img/icons/favicon-16x16.png">
    <link rel="manifest" href="../../../_/img/icons/site.webmanifest">
    <link rel="mask-icon" href="../../../_/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../../../_/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="../../../_/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="9zNtA8Mxo6eMk-CIvQQbCvXFWjOoAHT6phYIK3saIV4" />
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://docs.ted.europa.eu">
                <img src="../../../_/img/ted-logo.svg" class="logo" />
                <span class="navbar-title">TED Developer Documentation</span>
            </a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="https://docs.ted.europa.eu">Home</a>
                <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Products</a>
  <div class="navbar-dropdown">
      <a class="navbar-item" href="../../latest/index.html">eForms SDK</a>
      <a class="navbar-item" href="../../../EPO/latest/index.html">eProcurement Ontology</a>
      <a class="navbar-item" href="../../../ESPD-EDM/latest/index.html">ESPD EDM</a>
  </div>
</div>


<div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Resources</a>
  <div class="navbar-dropdown">
    <!-- <div class="navbar-item"><b>Publications Ofiice</b></div> -->
    <a class="navbar-item" href="https://github.com/OP-TED/eForms-SDK">eForms SDK on Github</a>
    <a class="navbar-item" href="https://simap.ted.europa.eu/web/simap/eforms">eForms on SIMAP</a>
    <a class="navbar-item" href="https://github.com/eprocurementontology/eprocurementontology">eProcurement
      Ontology</a>
    <a class="navbar-item" href="https://github.com/espd/espd-edm">European Single Procurement Document</a>
    <a class="navbar-item" href="https://op.europa.eu/en/web/eu-vocabularies/e-procurement/tables">eProcurement in
      EU Vocabularies</a>
    <hr class="navbar-divider">
    <!-- <div class="navbar-item"><b>DG GROW</b></div>-->
    <a class="navbar-item" href="https://ec.europa.eu/growth/single-market/public-procurement/digital/eforms_en">About
      eForms</a>
    <!-- <a class="navbar-item" href="https://github.com/eForms/eForms">eForms 2nd consultation</a> -->
  </div>
</div>

<a class="navbar-item" href="https://simap.ted.europa.eu/contact">Helpdesk</a>

                <div class="navbar-item search">
                    <input id="search-input" type="text" placeholder="Search docs">
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="eforms" data-version="1.6">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">eForms SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>General Reference</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../schema/index.html">eForms Specification</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/documents-forms-and-notices.html">Documents, forms &amp; notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/notice-content.html">Notice content</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Elements</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/schemas.html">Schemas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notices-xml-structure.html">Notices XML structure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/notice-information.html">Notice information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/procedure-lot-part-information.html">Procedure, Group of Lots, Lot &amp; Part related information</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/competition-results.html">Competition Results</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../schema/parties.html">Parties</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/change-notice.html">Change notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/contract-modification-notice.html">Contract Modification Notice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/withheld-publication.html">Withheld publication of information</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/codelists-and-fields.html">Codelists and Fields</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/identifiers.html">Identifiers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/acronyms-and-abbreviations.html">Acronyms &amp; abbreviations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/terms-and-definitions.html">Terms &amp; definitions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/other-resources.html">Other Resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../reference/index.html">Metadata Reference</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/business-terms/index.html">Business Terms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/business-rules/index.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/code-lists/index.html">Codelists</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>SDK Contents</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fields/index.html">Field metadata</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fields/xml-structure.html">XML Structure</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../codelists/index.html">Codelists</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-types/index.html">Notice Types</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../viewer-templates/index.html">View Templates</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../translations/index.html">Translations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../schematrons/index.html">Schematron</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">EFX grammar</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="expression-syntax.html">EFX expressions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="template-syntax.html">EFX templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="transpiling-efx.html">Transpiling EFX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Developer Guide</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/index.html">Start Here</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/understanding-the-sdk.html">Understanding the SDK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/sdk-glossary.html">SDK glossary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../versioning.html">SDK versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Working with the SDK</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/notice-forms.html">Create the forms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/xml-generation.html">Generate XML</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/visualisation.html">Visualise notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guide/validation.html">Validate notices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../guide/implementing-eforms-without-the-sdk.html">Working without the SDK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Java Libraries</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../efx-toolkit/index.html">EFX Toolkit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../eforms-core/index.html">eForms Core Library</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Sample Applications</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-viewer/index.html">Notice Viewer (Java)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../notice-editor/index.html">Notice Editor (Java)</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
      <div class="context">
          <span class="title">eForms SDK</span>
          <span class="version">1.6.0</span>
      </div>
  <ul class="components">
      <li class="component is-current">
        <a class="title" href="../../latest/index.html">eForms SDK</a>
        <ul class="versions">
            <li class="version">
              <a href="../../1.9/index.html">1.9.0</a>
            </li>
            <li class="version is-latest">
              <a href="../../latest/index.html">1.8.0</a>
            </li>
            <li class="version">
              <a href="../../1.7/index.html">1.7.0</a>
            </li>
            <li class="version is-current">
              <a href="../index.html">1.6.0</a>
            </li>
            <li class="version">
              <a href="../../1.5/index.html">1.5.1</a>
            </li>
            <li class="version">
              <a href="../../1.4/index.html">1.4.1</a>
            </li>
            <li class="version">
              <a href="../../1.3/index.html">1.3.2</a>
            </li>
            <li class="version">
              <a href="../../1.2/index.html">1.2.1</a>
            </li>
            <li class="version">
              <a href="../../1.1/index.html">1.1.1</a>
            </li>
            <li class="version">
              <a href="../../1.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../../EPO/latest/index.html">eProcurement Ontology</a>
        <ul class="versions">
            <li class="version">
              <a href="../../../EPO/4.0.0/index.html">4.0.0-rc.1</a>
            </li>
            <li class="version is-latest">
              <a href="../../../EPO/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../../EPO/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../../EPO/2.0.1/index.html">2.0.1</a>
            </li>
            <li class="version">
              <a href="../../../EPO/2.0.0/index.html">2.0.0</a>
            </li>
            <li class="version">
              <a href="../../../EPO/1/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../../ESPD-EDM/latest/index.html">ESPD EDM</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../../../ESPD-EDM/latest/index.html">3.3.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/3.2.0/index.html">3.2.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/3.1.0/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.1.1/index.html">2.1.1</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.1.0/index.html">2.1.0</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/2.0.2/index.html">2.0.2</a>
            </li>
            <li class="version">
              <a href="../../../ESPD-EDM/1.0.2/index.html">1.0.2</a>
            </li>
        </ul>
      </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">eForms SDK</a></li>
    <li><a href="index.html">EFX grammar</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.6.0</button>
  <div class="version-menu">
    <a class="version" href="../../1.9/efx/index.html">1.9.0</a>
    <a class="version" href="../../latest/efx/index.html">1.8.0</a>
    <a class="version" href="../../1.7/efx/index.html">1.7.0</a>
    <a class="version is-current" href="index.html">1.6.0</a>
    <a class="version" href="../../1.5/efx/index.html">1.5.1</a>
    <a class="version" href="../../1.4/efx/index.html">1.4.1</a>
    <a class="version" href="../../1.3/efx/index.html">1.3.2</a>
    <a class="version" href="../../1.2/efx/index.html">1.2.1</a>
    <a class="version" href="../../1.1/efx/index.html">1.1.1</a>
    <a class="version" href="../../1.0/efx/index.html">1.0.0</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">eForms Expression Language</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The eForms Expression Language (EFX) is a domain specific language used to formally express and communicate the eForms business rules.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_needs_covered_by_efx"><a class="anchor" href="#_needs_covered_by_efx"></a>Needs covered by EFX</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every business rule is associated with a logical condition that determines whether the rule is applicable or not in a certain situation. Moreover, every business rule involves an additional logical operation to determine whether the rule is respected or not. While some of these logical operations are simple enough to be defined indirectly, many of them require a formal language that allows for ad hoc calculations as well as logical operations. EFX is used therefore to express non-trivial logical operations necessary for notice validation.</p>
</div>
<div class="paragraph">
<p>Additionally, EFX is used to define templates for notice visualisation. The visual structure of a notice is not the same as the physical structure of the XML file. Moreover, in many cases, combining values of several fields is necessary to visualise a particular piece of information. The templating features of EFX allow us to overcome these difficulties in defining and maintaining correct and reusable notice visualisation templates.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_why_create_a_dsl"><a class="anchor" href="#_why_create_a_dsl"></a>Why create a DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We decided to develop a domain specific language (DSL) to cover these needs, as it would allow us to use a language that was simple to read and write, as well as unambiguous in our domain, while being expressive enough to cover all our present and future needs. At the same time a DSL allows the Publications Office as well as the diverse ecosystem of eSenders, to create parsers and translators targeting several different development and runtime environments.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features_of_efx"><a class="anchor" href="#_features_of_efx"></a>Features of EFX</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>First and foremost, EFX supports the definition of expressions that involve references to eForms fields, nodes and codelists. In EFX you reference a field using its identifier.</p>
</li>
<li>
<p>EFX supports all the data types used in eForms and provides operators and functions to manipulate them.</p>
</li>
<li>
<p>Crucially, EFX is also context sensitive and manages implicit context changes as necessary allowing for simpler expressions.</p>
</li>
<li>
<p>The syntax of EFX expressions is inspired by XPath; however, it is simpler to read, write and translate.</p>
</li>
<li>
<p>Apart from writing expressions, EFX allows the creation of templates that can be translated to any markup language such as XSLT.</p>
</li>
<li>
<p>EFX templates allow the hierarchical grouping and positioning of visual elements including simplified referencing of labels (translations), field values and EFX expressions.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_parse_efx"><a class="anchor" href="#_how_to_parse_efx"></a>How to parse EFX</h2>
<div class="sectionbody">
<div class="paragraph">
<p>EFX is defined using ANTLR v4. <a href="https://www.antlr.org">ANTLR</a> is a well established parser generator that can generate parsers in Java, C#, Python, JavaScript, Go, C++, Swift, PHP and DART.</p>
</div>
<div class="paragraph">
<p>To create an EFX parser you need the EFX grammar (included in the eForms SDK), as well as the ANTLR developer tools targeting your development environment.</p>
</div>
<div class="paragraph">
<p>ANTLR will generate for you, in the target language of your choice, the source code of an EFX lexical analyser and parser. It will also generate a listener and/or visitor base class, which you should extend to create translators that can translate EFX expressions to the scripting language of your choice (one that your eForms application can execute).</p>
</div>
<div class="paragraph">
<p>For our own needs at the Publications Office we have developed translators that translate EFX expressions to XPath, and EFX templates to XSLT. These translators are available in Github for you to reuse, improve or use as an inspiration for creating your own.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_efx_resources"><a class="anchor" href="#_efx_resources"></a>EFX Resources</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="https://github.com/OP-TED/eForms-SDK/tree/main/efx-grammar">EFX grammar</a></dt>
<dd>
<p>The EFX grammar is available in the <a href="https://github.com/OP-TED/eForms-SDK">eForms SDK</a>. The grammar is defined as an ANTLR v4 grammar.</p>
</dd>
<dt class="hdlist1"><a href="https://github.com/OP-TED/efx-toolkit-java">EFX Parser and Translators in Java</a></dt>
<dd>
<p>The parser and translators that we have created for our own needs are available in <a href="https://github.com/OP-TED/efx-toolkit-java">Github</a>. Our EFX Expression Translator translates EFX expressions to XPath. The translator is also designed in a way that allows you to reuse it for translating to other target languages.</p>
</dd>
<dt class="hdlist1"><a href="https://github.com/OP-TED/eforms-notice-viewer">Notice Viewer sample application</a></dt>
<dd>
<p>To demonstrate how an EFX template translator can be created and used, we have developed a sample application for notice visualisation. You can use it as an inspiration or as a basis for creating your own notice viewer. You can find the Notice Viewer sample in <a href="https://github.com/OP-TED/eforms-notice-viewer">Github</a>.</p>
</dd>
</dl>
</div>
<hr>
<div class="paragraph">
<p><strong>See also:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../efx-toolkit/index.html" class="xref page">EFX Toolkit for Java</a></p>
</li>
<li>
<p><a href="expression-syntax.html" class="xref page">EFX expression syntax</a></p>
</li>
<li>
<p><a href="template-syntax.html" class="xref page">EFX template syntax</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/docsearch-2.6.3.js"></script>
<script src="../../../_/js/vendor/search-algolia.js" id="search-script" data-api-key="7bd6f4bbe2cb3188cd99f1625cb00f75" data-api-id="BE8MR7O2G7" data-index-name="ted-docs-idx"></script>
<footer class="footer">
    <div class=columns>
        <div>
  <p>The projects documented in this Developer Documentation Portal are developed and managed by the TED & EU Public Procurement Unit of the Publications Office of the European Union
  <br/>This page was built using a link:https://github.com/OP-TED/antora-eui[fork of the Antora default UI], which is licensed under the terms of the MPL-2.0 license.</p>
</div>
        <div>
            <h3>This website is managed by<h3>
                    <img src="../../../_/img/op-logo-with-name.svg" class="logo" />
        </div>
    </div>
</footer>  </body>
</html>
