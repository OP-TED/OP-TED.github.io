<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: TED Developer Documentation</title>
    <link rel="canonical" href="https://docs.ted.europa.eu/ESPD-EDM/2.1.1/XIX.3.AIlAboutUUIDs.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/custom.css">
    <link rel="stylesheet" href="../../_/css/vendor/docsearch-2.6.3.css">
        <link rel="apple-touch-icon" sizes="180x180" href="../../_/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../_/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../_/img/icons/favicon-16x16.png">
    <link rel="manifest" href="../../_/img/icons/site.webmanifest">
    <link rel="mask-icon" href="../../_/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../../_/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="../../_/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="9zNtA8Mxo6eMk-CIvQQbCvXFWjOoAHT6phYIK3saIV4" />
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://docs.ted.europa.eu">
                <img src="../../_/img/ted-logo.svg" class="logo" />
                <span class="navbar-title">TED Developer Documentation</span>
            </a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="https://docs.ted.europa.eu">Home</a>
                <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Products</a>
  <div class="navbar-dropdown">
      <a class="navbar-item" href="../../eforms/latest/index.html">eForms SDK</a>
      <a class="navbar-item" href="../../EPO/latest/index.html">eProcurement Ontology</a>
      <a class="navbar-item" href="../latest/index.html">ESPD EDM</a>
  </div>
</div>


<div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Resources</a>
  <div class="navbar-dropdown">
    <!-- <div class="navbar-item"><b>Publications Ofiice</b></div> -->
    <a class="navbar-item" href="https://github.com/OP-TED/eForms-SDK">eForms SDK on Github</a>
    <a class="navbar-item" href="https://simap.ted.europa.eu/web/simap/eforms">eForms on SIMAP</a>
    <a class="navbar-item" href="https://github.com/eprocurementontology/eprocurementontology">eProcurement
      Ontology</a>
    <a class="navbar-item" href="https://github.com/espd/espd-edm">European Single Procurement Document</a>
    <a class="navbar-item" href="https://op.europa.eu/en/web/eu-vocabularies/e-procurement/tables">eProcurement in
      EU Vocabularies</a>
    <hr class="navbar-divider">
    <!-- <div class="navbar-item"><b>DG GROW</b></div>-->
    <a class="navbar-item" href="https://ec.europa.eu/growth/single-market/public-procurement/digital/eforms_en">About
      eForms</a>
    <!-- <a class="navbar-item" href="https://github.com/eForms/eForms">eForms 2nd consultation</a> -->
  </div>
</div>

<a class="navbar-item" href="https://simap.ted.europa.eu/contact">Helpdesk</a>

                <div class="navbar-item search">
                    <input id="search-input" type="text" placeholder="Search docs">
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ESPD-EDM" data-version="2.1.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
      <div class="context">
          <span class="title">ESPD EDM</span>
          <span class="version">2.1.1</span>
      </div>
  <ul class="components">
      <li class="component">
        <a class="title" href="../../eforms/latest/index.html">eForms SDK</a>
        <ul class="versions">
            <li class="version">
              <a href="../../eforms/1.9/index.html">1.9.0</a>
            </li>
            <li class="version is-latest">
              <a href="../../eforms/latest/index.html">1.8.0</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.7/index.html">1.7.0</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.6/index.html">1.6.0</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.5/index.html">1.5.1</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.4/index.html">1.4.1</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.3/index.html">1.3.2</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.2/index.html">1.2.1</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.1/index.html">1.1.1</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../EPO/latest/index.html">eProcurement Ontology</a>
        <ul class="versions">
            <li class="version">
              <a href="../../EPO/4.0.0/index.html">4.0.0-rc.1</a>
            </li>
            <li class="version is-latest">
              <a href="../../EPO/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../EPO/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../EPO/2.0.1/index.html">2.0.1</a>
            </li>
            <li class="version">
              <a href="../../EPO/2.0.0/index.html">2.0.0</a>
            </li>
            <li class="version">
              <a href="../../EPO/1/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component is-current">
        <a class="title" href="../latest/index.html">ESPD EDM</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../latest/index.html">3.3.0</a>
            </li>
            <li class="version">
              <a href="../3.2.0/index.html">3.2.0</a>
            </li>
            <li class="version">
              <a href="../3.1.0/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version is-current">
              <a href="index.html">2.1.1</a>
            </li>
            <li class="version">
              <a href="../2.1.0/index.html">2.1.0</a>
            </li>
            <li class="version">
              <a href="../2.0.2/index.html">2.0.2</a>
            </li>
            <li class="version">
              <a href="../1.0.2/index.html">1.0.2</a>
            </li>
        </ul>
      </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.1.1</button>
  <div class="version-menu">
    <a class="version is-missing" href="../latest/index.html">3.3.0</a>
    <a class="version is-missing" href="../3.2.0/index.html">3.2.0</a>
    <a class="version is-missing" href="../3.1.0/index.html">3.1.0</a>
    <a class="version is-missing" href="../3.0.1/index.html">3.0.1</a>
    <a class="version is-current" href="XIX.3.AIlAboutUUIDs.html">2.1.1</a>
    <a class="version" href="../2.1.0/XIX.3.AIlAboutUUIDs.html">2.1.0</a>
    <a class="version is-missing" href="../2.0.2/index.html">2.0.2</a>
    <a class="version is-missing" href="../1.0.2/index.html">1.0.2</a>
  </div>
</div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect2">
<h3 id="_ix_3_all_about_uuids"><a class="anchor" href="#_ix_3_all_about_uuids"></a>IX.3 All about UUIDs</h3>
<div class="paragraph">
<p>In the Basic and Extended
<a href="https://github.com/OP-TED/ESPD-EDM/tree/v2.1.1/docs/src/main/asciidoc/modules/ROOT/dist/cl/xlsx">ESPD-EDM Criteria Taxonomies</a>
every element of the criterion data structures has an UUID assigned, except for the CAPTIONs, REQUIREMENT(s) and
QUESTION(s).</p>
</div>
<div class="paragraph">
<p>This UUID is necessary to identify unambiguously a particular "data structure" (or "data shape"). One data
structure identified with a unique identifier has always the same elements and in the same order.
This allows <strong><em>the reuse</em></strong> of the same structure multiple times in the same criterion or in different criteria.
These UUIDs map the ones maintained in <a href="https://ec.europa.eu/isa2/solutions/e-certis_en">e-Certis</a> for each criterion.</p>
</div>
<div class="sect3">
<h4 id="_examples_of_data_structure_reuse"><a class="anchor" href="#_examples_of_data_structure_reuse"></a>Examples of data structure reuse</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Example 1</strong>: There is a data structure that is reused by practically  all the criteria, the one asking whether the information
is available electronically. You will notice that all criteria where it is used the UUIDs of the groups and
subgroups are identical, but also the cardinalities, the PropertyDataType and the Element Code.</p>
</li>
<li>
<p><strong>Example 2</strong>: If you look into the "Convictions" data structures you will notice a data structure
(a QUESTION_SUBGROUP) identified with the UUID "f4978772-3126-4ded-bc30-f50da8c3a038".
This subgroup contains one QUESTION ("Have you taken measures to demonstrate your reliability (Self-Cleaning)?"
and a sub-group with another QUESTION ("Please describe them").
If you search into the spread-sheet book you will observe that this very structure is also reused by other criteria
(e.g. CRITERION.EXCLUSION.SOCIAL.*, CRITERION.EXCLUSION.MISCONDUCT.\*, etc.), but the UUID of the main subgroup is
different in all those cases from the one used for Convictions. This is because the Element Code in the case of
Convictions (and for this subgroup) is "ONTRUE" whilst in the rest of criteria it is "ON*".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As mentioned above, CAPTIONs, REQUIREMENT(s) and QUESTION(s) cannot have a <strong><em>reusable</em></strong> UUID pre-allocated.
The reason for this is that each response by the economic operator (in the ESPD Response document) MUST refer to one,
and only one, QUESTION of the ESPD Request. See other details on criterion properties in sections
<a href="#iv-4-properties">IV.4 Properties</a> and <a href="#viii-7-answering-questions">VIII.7 Answering QUESTION(s)</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementation_challenge"><a class="anchor" href="#_implementation_challenge"></a>Implementation challenge</h4>
<div class="paragraph">
<p>The fact that Criterion Properties are to be generated dynamically may pose a challenge to developers in certain
situations. One of these situations could be when the QUESTIONs are repositoried and answered in a
Pre-Qualification System (PQS) that is used to pre-fill ESPD-Responses to ESPD-Request instances that are
kept in another system unknown to the PQS (e.g. a Service Provider acting on behalf of one or more Contracting
Authorities).</p>
</div>
<div class="paragraph">
<p>One possible solution may be based on the fact that <strong><em>each REQUIREMENT and QUESTION occurs always in the same
position inside a group or a sub-group</em></strong>. If the order of the REQUIREMENTs and QUESTIONs is altered the
Schematron-based validation would trigger a fatal exception.</p>
</div>
<div class="paragraph">
<p>The proposal consists in identifying each REQUIREMENT and QUESTION by concatenating the UUIDs of the CRITERION and the
"parent" groups and sub-groups, <strong><em>as described in the Criteria Taxonomy spread-sheets</em></strong>, produce a short hash of the
concatenated string and add to it the position of the element in the group or subgroup.
This casts a <strong>constant</strong> UUID for each REQUIREMENT and QUESTION that would be known by <strong><em>any</em></strong> stakeholder, thus
enabling the decoupling of systems producing ESPD-Requests and systems keeping particular QUESTIONS and RESPONSES.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take one <strong><em>Basic</em></strong> criterion as an example to illustrate this proposal (this works also for <strong><em>Extended
ESPD</em></strong> criteria):</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_convictions_criterion"><a class="anchor" href="#_example_convictions_criterion"></a>Example: Convictions Criterion</h4>
<div class="sect4">
<h5 id="_user_story"><a class="anchor" href="#_user_story"></a>User Story</h5>
<div class="paragraph">
<p><em>I, as a PQS, need to provide the information about an EO&#8217;s convictions, so the  EO can produce a pre-filled ESPD-Response</em>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_algorithm"><a class="anchor" href="#_algorithm"></a>Algorithm</h5>
<div class="paragraph">
<p>The algorithm to generate the first subgroup of QUESTIONs (in convictions) would be:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Question_UUID = "" ;</p>
</li>
<li>
<p>Question_UUID += Criterion_UUID + "." ;</p>
</li>
<li>
<p>Question_UUID += Group_UUID + "." ;</p>
</li>
<li>
<p>Question_UUID += Subgroup_UUID + "." ;</p>
</li>
<li>
<p>Question_UUID  = hash_md5(Question_UUID) ;</p>
</li>
<li>
<p>Question_UUID += Question_UUID + "." + Group_Position() + "." + Subgroup_Position() + "." + Question_Position() ;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Apply repeatedly this algorithm to the subsequent sub-subgroups.</p>
</div>
<div class="paragraph">
<p>The objective of hashing the concatenation of UUIDs is to produce a non-too-verbose UUID for the QUESTION.</p>
</div>
<div class="paragraph">
<p>This algorithm produces a unique digital print per each data element of the <em>data shape</em>. If this hash were added to
an IRI, the data element could be described in a very specific namespace and its de-referencing could provide
back a machine-readable description of the element (name, description, examples, etc.).</p>
</div>
</div>
<div class="sect4">
<h5 id="_data_structure"><a class="anchor" href="#_data_structure"></a>Data Structure</h5>
<div class="paragraph">
<p>The figure below would represent how the criterion "Participation in a criminal organisation would look like in the
Criteria Taxonomy if you applied the algorithm above:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/TheUUID_MaltaAlgorithm.png" alt="Extended 'Contributions' criterion data structure">
</div>
<div class="title">Figure 1. A way of generating UUIDs that is agnostic of the ESPD-Request XML instance.</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/docsearch-2.6.3.js"></script>
<script src="../../_/js/vendor/search-algolia.js" id="search-script" data-api-key="7bd6f4bbe2cb3188cd99f1625cb00f75" data-api-id="BE8MR7O2G7" data-index-name="ted-docs-idx"></script>
<footer class="footer">
    <div class=columns>
        <div>
  <p>The projects documented in this Developer Documentation Portal are developed and managed by the TED & EU Public Procurement Unit of the Publications Office of the European Union
  <br/>This page was built using a link:https://github.com/OP-TED/antora-eui[fork of the Antora default UI], which is licensed under the terms of the MPL-2.0 license.</p>
</div>
        <div>
            <h3>This website is managed by<h3>
                    <img src="../../_/img/op-logo-with-name.svg" class="logo" />
        </div>
    </div>
</footer>  </body>
</html>
