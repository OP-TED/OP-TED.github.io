<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mapping suite package structure :: TED Developer Documentation</title>
    <link rel="canonical" href="https://docs.ted.europa.eu/rdf-mapping/mapping-suite-structure.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/custom.css">
    <link rel="stylesheet" href="../_/css/vendor/docsearch-2.6.3.css">
        <link rel="apple-touch-icon" sizes="180x180" href="../_/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../_/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../_/img/icons/favicon-16x16.png">
    <link rel="manifest" href="../_/img/icons/site.webmanifest">
    <link rel="mask-icon" href="../_/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../_/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="../_/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="9zNtA8Mxo6eMk-CIvQQbCvXFWjOoAHT6phYIK3saIV4" />
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://docs.ted.europa.eu">
                <img src="../_/img/ted-logo.svg" class="logo" />
                <span class="navbar-title">TED Developer Documentation</span>
            </a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="https://docs.ted.europa.eu">Home</a>
                <div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Products</a>
  <div class="navbar-dropdown">
      <a class="navbar-item" href="../eforms/latest/index.html">eForms SDK</a>
      <a class="navbar-item" href="../EPO/latest/index.html">eProcurement Ontology</a>
      <a class="navbar-item" href="../ESPD-EDM/latest/index.html">ESPD EDM</a>
  </div>
</div>


<div class="navbar-item has-dropdown is-hoverable">
  <a class="navbar-link" href="#">Resources</a>
  <div class="navbar-dropdown">
    <!-- <div class="navbar-item"><b>Publications Ofiice</b></div> -->
    <a class="navbar-item" href="https://github.com/OP-TED/eForms-SDK">eForms SDK on Github</a>
    <a class="navbar-item" href="https://simap.ted.europa.eu/web/simap/eforms">eForms on SIMAP</a>
    <a class="navbar-item" href="https://github.com/eprocurementontology/eprocurementontology">eProcurement
      Ontology</a>
    <a class="navbar-item" href="https://github.com/espd/espd-edm">European Single Procurement Document</a>
    <a class="navbar-item" href="https://op.europa.eu/en/web/eu-vocabularies/e-procurement/tables">eProcurement in
      EU Vocabularies</a>
    <hr class="navbar-divider">
    <!-- <div class="navbar-item"><b>DG GROW</b></div>-->
    <a class="navbar-item" href="https://ec.europa.eu/growth/single-market/public-procurement/digital/eforms_en">About
      eForms</a>
    <!-- <a class="navbar-item" href="https://github.com/eForms/eForms">eForms 2nd consultation</a> -->
  </div>
</div>

<a class="navbar-item" href="https://simap.ted.europa.eu/contact">Helpdesk</a>

                <div class="navbar-item search">
                    <input id="search-input" type="text" placeholder="Search docs">
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rdf-mapping" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">XML to RDF Mappings</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="repository-structure.html">Repository structure</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="mapping-suite-structure.html">Mapping suite anatomy</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="code-list-resources.html">Code list mappings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="methodology.html">Methodology</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cli-toolchain.html">Toolchain</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="preparing-test-data.html">Data samples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mapping-priorities.html">Mapping priorities</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
      <div class="context">
          <span class="title dim">Select a product/version</span>
          <span class="version">&nbsp;</span>
      </div>
  <ul class="components">
      <li class="component">
        <a class="title" href="../eforms/latest/index.html">eForms SDK</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../eforms/latest/index.html">1.5.1</a>
            </li>
            <li class="version">
              <a href="../eforms/1.4/index.html">1.4.1</a>
            </li>
            <li class="version">
              <a href="../eforms/1.3/index.html">1.3.2</a>
            </li>
            <li class="version">
              <a href="../eforms/1.2/index.html">1.2.1</a>
            </li>
            <li class="version">
              <a href="../eforms/1.1/index.html">1.1.1</a>
            </li>
            <li class="version">
              <a href="../eforms/1.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../EPO/latest/index.html">eProcurement Ontology</a>
        <ul class="versions">
            <li class="version">
              <a href="../EPO/3.1.1/index.html">3.1.1 ~dev</a>
            </li>
            <li class="version is-latest">
              <a href="../EPO/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../EPO/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../EPO/2.0.1/index.html">2.0.1</a>
            </li>
            <li class="version">
              <a href="../EPO/2.0.0/index.html">2.0.0</a>
            </li>
            <li class="version">
              <a href="../EPO/1.0.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../ESPD-EDM/latest/index.html">ESPD EDM</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../ESPD-EDM/latest/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../ESPD-EDM/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../ESPD-EDM/2.1.1/index.html">2.1.1</a>
            </li>
            <li class="version">
              <a href="../ESPD-EDM/2.1.0/index.html">2.1.0</a>
            </li>
            <li class="version">
              <a href="../ESPD-EDM/2.0.2/index.html">2.0.2</a>
            </li>
            <li class="version">
              <a href="../ESPD-EDM/1.0.2/index.html">1.0.2</a>
            </li>
        </ul>
      </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">XML to RDF Mappings</a></li>
    <li><a href="mapping-suite-structure.html">Mapping suite anatomy</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Mapping suite package structure</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this section we describe the structure of a “mapping suite package” in GitHub. Such a package contains everything that is needed for the development and testing of a given “mapping suite” that is applicable to a certain set of notices. After the package is finalised, it can be used by a process to apply it to a large number of notices stored in a database, and would transform those notices into RDF data.</p>
</div>
<div class="paragraph">
<p>A package is represented by a well-defined folder structure containing certain files. This folder structure is repeated for every developed mapping. Initial organisation of these packages is per Form number, but it may evolve.</p>
</div>
<div class="paragraph">
<p>The structure of the package changes through the different phases of the mapping development process. Below we describe how such a package looks in three phases of the mapping development.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_suite_package_description_for_semantic_engineers"><a class="anchor" href="#_mapping_suite_package_description_for_semantic_engineers"></a>Mapping suite package description for Semantic Engineers</h3>
<div class="paragraph">
<p>In the first, initial, phase, when the Semantic Engineers start working on a new mapping suite, they will have to set up a package folder structure similar to the one described below, and will work on (or with) the files contained there.</p>
</div>
<div class="paragraph">
<p><strong>Assumption:</strong> Regarding the naming and organisation of the various mapping suites, <strong>one package per form number</strong> is assumed to be THE way to organise these packages.</p>
</div>
<div class="paragraph">
<p><strong>Challenge:</strong> Are there better ways to deal with certain sections (sub-sections) that repeat across multiple forms? Consider Section I, for example, which in case of forms F03, F06, F25 contains “almost” the same information, therefore only one mapping should be written for it and RE-used in “final” form-mapping-packages. The problem is also discussed in a dedicated section below.</p>
</div>
<div class="paragraph">
<p>The structure of an example mapping package folder structure is presented below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/package_Fxx
	/transformation
		conceptual_mappings.xlsx
		/mappings
			*.rml.ttl
		/resources
			*.json, *.xml, *.csv
	/test_data
		*.xml</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/package_Fxx</code> root folder of the mapping suite</p>
</li>
<li>
<p><code>/transformation/conceptual_mappings.xlsx</code> manually created (from the Google Sheet template described <a href="methodology.html#_conceptual-mapping-structure" class="xref page">here</a>)</p>
</li>
<li>
<p><code>/transformation/resources</code>  additional resources possibly needed by the transformation rules;<br>
The content of this folder should be automatically generated by the mapping package processor, based on the "Resources" sheet of the <code>conceptual_mappings.xlsx</code>, from the "source of truth" <code>ted-rdf-conversion-pipeline/ted-sws/resources</code>.</p>
</li>
<li>
<p><code>/transformation/mappings/*.rml.ttl</code> the relevant RML transformation rules, organized in module files, which are copied from the "source" mappings folder, according to the information specified in the "RML Modules" sheet of the <code>conceptual_mappings.xlsx</code>. <strong>IMPORTANT!!!</strong> In these rules the source XML is always referring to <code>data/source.xml</code>, which corresponds to the <code>../../data/source.xml</code> file that will be copied (and renamed) from the <code>test_data</code> folder at the time of the execution of the mapping.</p>
</li>
<li>
<p><code>/test_data</code>  manually and carefully selected test data possibly grouped in suborders, e.g. <code>/test_data/batch-D1/*.xml</code></p>
</li>
<li>
<p><code>technical_mappings.yarrrml.yaml</code> (optional) manually created, and used in earlier days of the mapping development, but currently not used</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_suite_package_description_for_the_software_engineers"><a class="anchor" href="#_mapping_suite_package_description_for_the_software_engineers"></a>Mapping suite package description for the Software Engineers</h3>
<div class="paragraph">
<p>A package provided by the semantic engineers (SE) is enriched with additional artefacts that are generated automatically using the <a href="cli-toolchain.html" class="xref page">package expanding tools</a> which take as input the artefacts provided by the SE. Here are some examples of these additional artefacts that are being generated:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Metadata</strong> describing the parameters for selecting the notices that the mappings can be applied to, various version information, etc.</p>
</li>
<li>
<p><strong>SPARQL queries</strong> that can be used to validate and/or test the generated outputs</p>
</li>
<li>
<p><strong>SHACL shapes</strong> that can be used to validate and the structure of the generated outputs</p>
</li>
<li>
<p>New ones may be added at the time of writing this document</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the package processing/expansion, the structure of the example mapping package presented in the previous subsection would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/package_Fxx
	metadata.json
	/transformation
		conceptual_mappings.xlsx
		/mappings
			*.rml.ttl
		/resources
			*.json, *.xml, *.csv
	/data
		source.xml
	/output
		*.rdf
	/validation
		/sparql
			/cm_assertions
				*.rq
		/shacl # this is a constant, when we know what the SHACL is (currently unknown)
			*.shacl.ttl # data shape file(s)
	/test_data # manually and carefully selected test data
		*.xml</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>metadata.json</code> automatically generated from Metadata sheet of <code>conceptual_mapping.xlsx</code></p>
</li>
<li>
<p><code>/data</code> # this is a placeholder created at runtime to process the inputs. It serves only when the mapping suite is being tested, or executed by some script.</p>
</li>
<li>
<p><code>source.xml</code> this file is generated during runtime by copying a given test data file</p>
</li>
<li>
<p><code>/output</code> this is a placeholder created at runtime to store outputs. It serves only when the mapping suite is being tested, or executed by some script.</p>
</li>
<li>
<p><code>/validation/sparql/cm_assertions</code> SPARQL queries automatically generated from the conceptual mapping</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_suite_package_description_for_the_semantic_engineers_after_the_expansion"><a class="anchor" href="#_mapping_suite_package_description_for_the_semantic_engineers_after_the_expansion"></a>Mapping suite package description for the Semantic Engineers after the expansion</h3>
<div class="paragraph">
<p>After the “execution” of a mapping, the mapping package will be further enriched, and will contain additional files, as a result of running the mapping suite on the included test data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/package_Fxx
	metadata.json
	/transformation
		conceptual_mappings.xlsx
		/mappings
			*.rml.ttl
		/resources
			*.json, *.xml, *.csv
	/data
		source.xml
	/output
		/&lt;notice_file1&gt;
			&lt;notice_file1&gt;.ttl
			/test_suite_report
				*.ttl, *.html, *.json # e.g. sparql_cm_assertions.html, shacl_epo.html, xml_coverage.html
		/&lt;notice_file2&gt;
			...
		/&lt;notice_file3&gt;
			...
	/validation
		/sparql
			/cm_assertions
				*.rq
		/shacl
			/epo
				ePO_shacl_shapes.rdf
			shacl_result_query.rq
	/test_data
		&lt;notice_file1&gt;.xml
		&lt;notice_file2&gt;.xml
		&lt;notice_file3&gt;.xml
		*.xml</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/output/&lt;notice_file1&gt;</code> for each example file we create a folder that will contain all the generated artefacts for that sample file</p>
</li>
<li>
<p><code>/output/test_suite_report</code>  validation reports summarising all individual reports</p>
</li>
<li>
<p><code>/output/&lt;notice_file1&gt;/&lt;notice_file1&gt;.ttl</code> the output of the transformation
*</p>
</li>
</ul>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script src="../_/js/vendor/docsearch-2.6.3.js"></script>
<script src="../_/js/vendor/search-algolia.js" id="search-script" data-api-key="7bd6f4bbe2cb3188cd99f1625cb00f75" data-api-id="BE8MR7O2G7" data-index-name="ted-docs-idx"></script>
<footer class="footer">
    <div class=columns>
        <div>
  <p>The projects documented in this Developer Documentation Portal are developed and managed by the TED & EU Public Procurement Unit of the Publications Office of the European Union
  <br/>This page was built using a link:https://github.com/OP-TED/antora-eui[fork of the Antora default UI], which is licensed under the terms of the MPL-2.0 license.</p>
</div>
        <div>
            <h3>This website is managed by<h3>
                    <img src="../_/img/op-logo-with-name.svg" class="logo" />
        </div>
    </div>
</footer>  </body>
</html>
